/**
 * isMobile.js v0.3.9
 *
 * A simple library to detect Apple phones and tablets,
 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
 * and any kind of seven inch device, via user agent sniffing.
 *
 * @author: Kai Mallea (kmallea@gmail.com)
 *
 * @license: http://creativecommons.org/publicdomain/zero/1.0/
 */
var sessionType=-1,AppDomain="https://loyaltyrewards.sapoapps.vn";function checkShowNotical(e,o){var i=-1;e<=0&&(i=0),"cart"==Bizweb.template&&e<=0&&(i=1);var t=!1;""==getCookie("redeemNotice")&&(t=!0),"index"==Bizweb.template&&e>0&&t&&(i=2),"cart"==Bizweb.template&&e>0&&t&&(i=3);var n=!1;""==getCookie("useNotice")&&(n=!0),"index"==Bizweb.template&&e>0&&n&&t&&(i=4),"cart"==Bizweb.template&&e>0&&n&&t&&(i=5),"index"==Bizweb.template&&e>0&&n&&!t&&(i=6),"cart"==Bizweb.template&&e>0&&n&&!t&&(i=7),-1!=i&&$.get(AppDomain+"/StorefrontNotifications/Render",{shop:window.appbulkloyalty.shop,customerId:window.appbulkloyalty.customer_id,digest:window.appbulkloyalty.digest,type:i,isMobile:o.phone},(function(e){window.location.href.includes("/checkout/thankyou")||$("body").append(e)}))}function addCookie(){2!=sessionType&&3!=sessionType||setCookie("redeemNotice","OK",{path:"/"}),4!=sessionType&&5!=sessionType||setCookie("useNotice","OK",{path:"/"})}function setCookie(e,o,i){i="path="+i;document.cookie=e+"="+o+"; "+i}function getCookie(e){for(var o=e+"=",i=document.cookie.split(";"),t=0;t<i.length;t++){for(var n=i[t];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(o))return n.substring(o.length,n.length)}return""}!function(e){var o=/iPhone/i,i=/iPod/i,t=/iPad/i,n=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,a=/Android/i,s=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,p=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,l=/IEMobile/i,r=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,d=/BlackBerry/i,u=/BB10/i,c=/Opera Mini/i,b=/(CriOS|Chrome)(?=.*\bMobile\b)/i,y=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,h=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),f=function(e,o){return e.test(o)},m=function(e){var m=e||navigator.userAgent,v=m.split("[FBAN");if(void 0!==v[1]&&(m=v[0]),this.apple={phone:f(o,m),ipod:f(i,m),tablet:!f(o,m)&&f(t,m),device:f(o,m)||f(i,m)||f(t,m)},this.amazon={phone:f(s,m),tablet:!f(s,m)&&f(p,m),device:f(s,m)||f(p,m)},this.android={phone:f(s,m)||f(n,m),tablet:!f(s,m)&&!f(n,m)&&(f(p,m)||f(a,m)),device:f(s,m)||f(p,m)||f(n,m)||f(a,m)},this.windows={phone:f(l,m),tablet:f(r,m),device:f(l,m)||f(r,m)},this.other={blackberry:f(d,m),blackberry10:f(u,m),opera:f(c,m),firefox:f(y,m),chrome:f(b,m),device:f(d,m)||f(u,m)||f(c,m)||f(y,m)||f(b,m)},this.seven_inch=f(h,m),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},v=function(){var e=new m;return e.Class=m,e};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=m:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=v():"function"==typeof define&&define.amd?define("isMobile",[],e.isMobile=v()):e.isMobile=v()}(this),function(e,o){var i=e,t=function(e,i){var t=o.createElement("script");t.type="text/javascript",void 0!==i&&(t.readyState?t.onreadystatechange=function(){"loaded"!=t.readyState&&"complete"!=t.readyState||(t.onreadystatechange=null,i())}:t.onload=function(){i()}),t.src=e,(o.getElementsByTagName("head")[0]||o.documentElement).appendChild(t)},n=function(e,o){e=e||new Array,o=o||function(){};if(0==e.length)o();else for(var i=0;i<e.length;i++)!function(i){t(e[i],(function(){i+1==e.length&&o()}))}(i)},a=function(o){var t={};e.appbulkloyalty=e.appbulkloyalty||{},e.appbulkloyalty.shop=e.appbulkloyalty.shop||Bizweb.store,e.appbulkloyalty.customer_id=e.appbulkloyalty.customer_id||0,e.appbulkloyalty.digest=e.appbulkloyalty.digest||"",o.get(AppDomain+"/StorefrontTabWidget/Render",{shop:e.appbulkloyalty.shop,customerId:e.appbulkloyalty.customer_id,digest:e.appbulkloyalty.digest,isMobile:isMobile.phone,isIphone:isMobile.apple.phone},(function(i){e.location.href.includes("/checkout/thankyou")||o("body").append(i)})),t.SetTabLocation=function(e){o(".ab-iframe").css(e)},t.SetTabLocationStyleTop=function(){o(".ab-iframe").css({top:"0px"})},t.SetTabLocationHiden=function(){o(".ab-iframe").hide()},checkShowNotical(e.appbulkloyalty.customer_id,isMobile);t.SetTabSize=function(e){o(".ab-iframe").css(e)},t.LoadPopup=function(i){CloseAndClearPopup();var t=1;null!=i.Id&&(t=i.Id),null!=i.sessionType&&(sessionType=i.sessionType),null!=i.domain&&(AppDomain=i.domain),o.get(AppDomain+"/StorefrontOverlays/Render",{shop:e.appbulkloyalty.shop,customerId:e.appbulkloyalty.customer_id,digest:e.appbulkloyalty.digest,tabId:t},(function(i){e.location.href.includes("/checkout/thankyou")||o("body").append(i),addCookie(),o(".ab-render-notification").remove()}))},t.CloseNotice=function(){o(".ab-render-notification").remove()},t.OpenPopupMobile=function(e){null!=e.sessionType&&(sessionType=e.sessionType),o(".ab-render-notification").remove(),addCookie()},t.SetSizeAndOpenPopup=function(e){o(".ab-overlay-iframe").css(e),o("#ab_modal").css(e),o("#ab_modal").center(),o(".ab-overlay-popup").css("visibility","visible")};i.CloseAndClearPopup=t.CloseAndClearPopup=function(e){o(".ab-overlay-popup").hide(),o(".ab-overlay-popup").remove()},o.fn.center=function(){return this.css("top",Math.max(0,(o(e).height()-o(this).outerHeight())/2)+"px"),this.css("left",Math.max(0,(o(e).width()-o(this).outerWidth())/2)+"px"),this};var n=e.addEventListener?"addEventListener":"attachEvent";return(0,e[n])("attachEvent"==n?"onmessage":"message",(function(e){var o=e[e.message?"message":"data"];void 0!==o.FuncName&&(console.log(o.FuncName),t[o.FuncName](o.input))}),!1),{}},s=[AppDomain+"/Scripts/js.cookie.min.js"];"undefined"==typeof jQuery||1===parseInt(jQuery.fn.jquery)&&parseFloat(jQuery.fn.jquery.replace(/^1\./,""))<9.1?t(AppDomain+"/Scripts/jquery-1.11.3.min.js",(function(){MyAppjQuery=jQuery.noConflict(!0),n(s,(function(e){a(MyAppjQuery)}))})):n(s,(function(){a(jQuery)}))}(window,document);