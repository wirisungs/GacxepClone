!function(){function t(){if(!c){c=!0;var t=document.querySelector('script[src*="googletagmanager"]'),e=t&&t.src;e&&(d=e.indexOf("id=G-")>0,s=e.indexOf("id=UA-")>0)}}function e(e,n,r){t(),window.gtag&&(window.gtag("event","add_to_cart",{currency:window.BizwebAnalytics.meta.currency,items:[{id:e.product_id,name:e.title,brand:e.vendor,category:e.product_type,variant:e.variant_title,price:String(e.price),quantity:n}]}),s?window.enabled_enhanced_ecommerce?window.gtag("event","add_to_cart",{event_category:"ecommerce",event_label:e.title,value:String(e.price),currency:window.BizwebAnalytics.meta.currency,items:[{id:e.product_id,name:e.title,brand:e.vendor,category:e.product_type,variant:e.variant_title,price:String(e.price),quantity:n}]}):window.gtag("event","add_to_cart",{event_category:"ecommerce",event_label:e.title,value:String(e.price)}):d&&window.gtag("event","add_to_cart",{currency:window.BizwebAnalytics.meta.currency,items:[{id:e.product_id,name:e.title,brand:e.vendor,category:e.product_type,variant:e.variant_title,price:String(e.price),quantity:n}]})),window.fbq&&fbq("track","AddToCart",{content_ids:e.variant_id,contents:[{id:e.variant_id,quantity:n,item_price:e.price}],content_type:"product",value:String(e.price*n),currency:window.BizwebAnalytics.meta.currency},{eventID:Bizweb.fbEventId+(r||"")})}function n(t){for(var e,n=t.split("&"),r=0;r<n.length;r++)if("quantity"===(e=n[r].split("="))[0])return parseInt(e[1]);return 1}function r(t,e,n,r){this.xhr=t,this.url=e,this.method=n,this.body=r}var i,a,o,c=!1,d=!1,s=!1;r.prototype.onReadyStateChange=function(){this.xhr.readyState===XMLHttpRequest.DONE&&this.handleXhrDone({method:this.method,url:this.url,body:this.body,xhr:this.xhr}),this.oldOnReadyStateChange&&this.oldOnReadyStateChange(this.xhr)},r.prototype.handleXhrDone=function(t){try{if("/cart/add.js"===t.url){var r=t.xhr.getResponseHeader("Date");t.xhr.responseText&&e(JSON.parse(t.xhr.responseText),n(t.body),r?new Date(r).getTime():null)}}catch(t){console&&console.warn&&console.warn("[shop_events_listener] Error in handleXhrDone:  "+t.message)}return t},i=XMLHttpRequest.prototype.open,a=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.open=function(t,e){return this._url=e,this._method=t,i.apply(this,arguments)},XMLHttpRequest.prototype.send=function(t){var e=new r(this,this._url,this._method,t);return this.addEventListener?this.addEventListener("readystatechange",e.onReadyStateChange.bind(e),!1):(e.oldOnReadyStateChange=this.onreadystatechange,this.onreadystatechange=e.onReadyStateChange),a.call(this,t)},"function"==typeof(o=window.fetch)&&(window.fetch=function(){return o.apply(window,Array.prototype.slice.call(arguments)).then((function(t){if(!t.ok)return t;try{if(!0===t.url.includes("/cart/add.js")){var r=t.headers.get("Date");e(t,n(arguments[1].body),r?new Date(r).getTime():null)}}catch(t){console&&console.warn&&console.warn("[shop_events_listener] Error in handleFetchRequest:  "+t.message)}return t}))})}();